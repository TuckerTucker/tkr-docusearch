<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="DocuSearch - Upload and search documents with AI">
    <title>DocuSearch Upload</title>
    <link rel="stylesheet" href="/ui/styles.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div>
                    <h1 class="app-title">DocuSearch</h1>
                    <p class="app-subtitle">Upload documents for AI-powered search</p>
                </div>
                <div id="worker-status" class="worker-status">
                    <span class="status-indicator status-indicator--checking"></span>
                    <span class="status-text">Checking worker...</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Upload Section -->
            <section id="upload-section" class="upload-section">
                <!-- File Drop Zone -->
                <div id="drop-zone" class="drop-zone">
                    <div class="drop-zone-content">
                        <svg class="drop-zone-icon" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="17 8 12 3 7 8"></polyline>
                            <line x1="12" y1="3" x2="12" y2="15"></line>
                        </svg>
                        <p class="drop-zone-text">
                            Drag and drop files here, or
                            <label for="file-input" class="file-input-label">browse</label>
                        </p>
                        <input
                            type="file"
                            id="file-input"
                            class="file-input"
                            multiple
                            accept=".pdf,.docx,.pptx,.xlsx,.md,.html,.htm,.xhtml,.asciidoc,.csv,.png,.jpg,.jpeg,.tiff,.bmp,.webp,.vtt,.wav,.mp3,.xml,.json"
                            aria-label="Choose files to upload"
                        />
                    </div>
                </div>

                <!-- Format Info -->
                <details class="format-info">
                    <summary class="format-info-summary">Supported Formats (21 total)</summary>
                    <div class="format-info-content">
                        <div class="format-category">
                            <h3 class="format-category-title">Documents (6)</h3>
                            <ul class="format-list">
                                <li>PDF - Portable Document Format</li>
                                <li>DOCX - Microsoft Word</li>
                                <li>PPTX - Microsoft PowerPoint</li>
                                <li>XLSX - Microsoft Excel</li>
                                <li>MD - Markdown</li>
                                <li>HTML - Web pages</li>
                            </ul>
                        </div>
                        <div class="format-category">
                            <h3 class="format-category-title">Images (6)</h3>
                            <ul class="format-list">
                                <li>PNG, JPEG, TIFF, BMP, WEBP</li>
                            </ul>
                        </div>
                        <div class="format-category">
                            <h3 class="format-category-title">Data (2)</h3>
                            <ul class="format-list">
                                <li>CSV - Comma-separated values</li>
                                <li>JSON - Docling native format</li>
                            </ul>
                        </div>
                        <div class="format-category">
                            <h3 class="format-category-title">Audio (3)</h3>
                            <ul class="format-list">
                                <li>VTT - Subtitles/captions</li>
                                <li>WAV, MP3 - Audio (with ASR)</li>
                            </ul>
                        </div>
                        <div class="format-category">
                            <h3 class="format-category-title">Specialized (4)</h3>
                            <ul class="format-list">
                                <li>XHTML - XHTML documents</li>
                                <li>AsciiDoc - Technical docs</li>
                                <li>USPTO XML - Patents</li>
                                <li>JATS XML - Scientific articles</li>
                            </ul>
                        </div>
                    </div>
                </details>
            </section>

            <!-- Processing Queue Section -->
            <section id="queue-section" class="queue-section">
                <header class="queue-header">
                    <h2 class="queue-title">Processing Queue</h2>
                    <div class="queue-stats">
                        <span id="queue-active-count" class="queue-stat">
                            <span class="queue-stat-value">0</span>
                            <span class="queue-stat-label">active</span>
                        </span>
                        <span id="queue-completed-count" class="queue-stat">
                            <span class="queue-stat-value">0</span>
                            <span class="queue-stat-label">completed</span>
                        </span>
                        <button id="clear-queue-btn" class="clear-queue-btn" title="Clear queue and reset localStorage">
                            Clear Queue
                        </button>
                    </div>
                </header>

                <!-- Queue Items Container -->
                <div id="queue-items" class="queue-items">
                    <!-- Queue items will be inserted here by JavaScript -->
                    <!-- Example structure (for reference):
                    <article class="queue-item queue-item--processing" data-doc-id="abc123" data-status="embedding_visual" data-progress="0.65">
                        <div class="queue-item-header">
                            <h3 class="queue-item-filename">report.pdf</h3>
                            <span class="queue-item-status">Processing</span>
                        </div>
                        <div class="queue-item-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 65%"></div>
                            </div>
                            <span class="progress-text">65% - Visual embeddings</span>
                        </div>
                        <div class="queue-item-details">
                            <span class="queue-item-time">1m 30s elapsed</span>
                            <span class="queue-item-eta">~48s remaining</span>
                        </div>
                    </article>
                    -->
                </div>

                <!-- Empty State -->
                <div id="queue-empty" class="queue-empty">
                    <svg class="queue-empty-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    <p>No documents uploaded yet. Drag and drop files above to get started.</p>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p class="footer-text">
                DocuSearch - AI-powered document search with ColPali
            </p>
        </footer>

        <!-- Toast Notifications -->
        <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true">
            <!-- Toast messages inserted here by JavaScript -->
            <!-- Example structure (for reference):
            <div class="toast toast--success">
                <p class="toast-message">File uploaded successfully!</p>
            </div>
            -->
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="/ui/upload.js"></script>
    <script type="module" src="/ui/monitor.js"></script>
</body>
</html>

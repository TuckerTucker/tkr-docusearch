@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import theme after Tailwind directives */
@import url(../theme.css);

/* Custom Animations - Reference Design Specifications */
@layer utilities {
  /* Stage completion bounce (400ms) */
  @keyframes stage-complete {
    0% {
      opacity: 0.5;
      transform: scale(0.8);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Error shake animation (400ms) */
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    10%, 30%, 50%, 70%, 90% {
      transform: translateX(-4px);
    }
    20%, 40%, 60%, 80% {
      transform: translateX(4px);
    }
  }

  /* Card expand animation (300ms) */
  @keyframes expand-card {
    from {
      max-height: 305px;
      opacity: 0.95;
    }
    to {
      max-height: 800px;
      opacity: 1;
    }
  }

  /* Card collapse animation (250ms) */
  @keyframes collapse-card {
    from {
      max-height: 800px;
      opacity: 1;
    }
    to {
      max-height: 305px;
      opacity: 0.95;
    }
  }

  /* Toast slide in (200ms) */
  @keyframes toast-slide-in {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  /* Animation utility classes */
  .animate-stage-complete {
    animation: stage-complete 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .animate-shake {
    animation: shake 400ms cubic-bezier(.36,.07,.19,.97);
  }

  .animate-expand-card {
    animation: expand-card 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animate-collapse-card {
    animation: collapse-card 250ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animate-toast-slide-in {
    animation: toast-slide-in 200ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* Smooth transitions */
  .transition-height {
    transition: max-height 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Line clamp utilities */
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.4;
    max-height: calc(1.4em * 3); /* 3 lines */
  }

  .transition-progress {
    transition: width 500ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Icon rotation for expand/collapse */
  .rotate-expand {
    transform: rotate(0deg);
    transition: transform 200ms ease-in-out;
  }

  .rotate-collapse {
    transform: rotate(180deg);
    transition: transform 200ms ease-in-out;
  }
}

/* Mobile Responsive Styles - Task 6 */

/* Touch-friendly interactions (mobile devices) */
@media (hover: none) {
  .btn:active,
  button:active {
    background: var(--accent, #f3f4f6);
    transform: scale(0.98);
  }
}

/* Desktop hover states */
@media (hover: hover) {
  .btn:hover,
  button:hover {
    background: var(--accent, #f3f4f6);
  }
}

/* Minimum tap target size for accessibility (WCAG 2.1 AA) */
.btn,
button,
a[role="button"],
input,
select {
  min-height: 44px;
  min-width: 44px;
}

/* Mobile layout (<640px) */
@media (max-width: 640px) {
  /* Full-screen modal for expanded cards */
  .document-card--expanded-mobile {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 50;
    border-radius: 0;
    overflow-y: auto;
    animation: modal-slide-up 300ms ease-out;
  }

  @keyframes modal-slide-up {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }

  /* Vertical card stack on mobile */
  .document-card {
    flex-direction: column;
  }

  /* Full-width thumbnail on mobile */
  .document-card-thumbnail {
    width: 100%;
    height: 200px;
  }

  /* Single column download buttons */
  .downloads-grid {
    grid-template-columns: 1fr !important;
    gap: 0.75rem;
  }

  /* Compact header on mobile */
  .app-header {
    padding: 0.75rem 1rem;
  }

  .app-header h1 {
    font-size: 1.125rem;
  }

  /* Compact upload zone */
  .upload-zone {
    padding: 1.5rem !important;
  }

  .upload-zone svg {
    height: 2rem;
    width: 2rem;
  }

  /* Full-width search */
  .search-container {
    flex-direction: column;
    gap: 0.75rem;
  }

  /* Stack filters on mobile */
  .filters-container {
    font-size: 0.75rem;
  }
}

/* Tablet layout (640px-1024px) */
@media (min-width: 640px) and (max-width: 1024px) {
  /* 2-column grid for tablets */
  .document-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }

  /* Smaller cards on tablet */
  .document-card {
    max-width: 600px;
    padding: 1rem;
  }

  .document-card-thumbnail {
    width: 180px;
    height: 180px;
  }

  /* 2Ã—2 grid for download buttons */
  .downloads-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 0.5rem;
  }
}

/* Desktop layout (>1024px) - Default styles */
@media (min-width: 1024px) {
  /* 3-column grid */
  .document-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  /* Full design spec dimensions */
  .document-card {
    max-width: 610px;
  }
}

/* XL Desktop (>1536px) */
@media (min-width: 1536px) {
  /* 4-column grid for extra large screens */
  .document-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

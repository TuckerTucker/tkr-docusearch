<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DocuSearch - Document Search</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <h1 class="logo">DocuSearch</h1>
        <nav class="nav" role="navigation" aria-label="Main navigation">
          <a href="index.html" class="nav-link">Home</a>
          <a href="search.html" class="nav-link active" aria-current="page">Search</a>
          <a href="status_dashboard.html" class="nav-link">Status</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main content -->
  <main class="main container" role="main">
    <!-- Alert container -->
    <div id="alert-container" aria-live="polite"></div>

    <!-- Search section -->
    <section class="search-section">
      <h2>Search Documents</h2>

      <!-- Search form -->
      <form id="search-form" class="search-form">
        <!-- Query input -->
        <div class="form-group query-input">
          <label for="query" class="form-label">Search Query</label>
          <div class="input-group">
            <input
              type="text"
              id="query"
              name="query"
              class="form-input"
              placeholder="Enter search query (e.g., 'quarterly revenue growth')"
              required
              minlength="2"
              maxlength="500"
              aria-required="true"
              aria-describedby="query-help"
            />
            <button type="submit" class="btn btn-primary" aria-label="Execute search">
              <span class="btn-text">Search</span>
              <span class="btn-icon" aria-hidden="true">üîç</span>
            </button>
          </div>
          <small id="query-help" class="form-help">Minimum 2 characters required</small>
        </div>

        <!-- Search options row -->
        <div class="form-row">
          <!-- Search mode selector -->
          <div class="form-group">
            <label for="search-mode" class="form-label">Search Mode</label>
            <select id="search-mode" name="search_mode" class="form-select">
              <option value="hybrid" selected>Hybrid (Visual + Text)</option>
              <option value="visual">Visual Only</option>
              <option value="text">Text Only</option>
            </select>
          </div>

          <!-- Number of results -->
          <div class="form-group">
            <label for="n-results" class="form-label">Results</label>
            <select id="n-results" name="n_results" class="form-select">
              <option value="5">5</option>
              <option value="10" selected>10</option>
              <option value="20">20</option>
              <option value="50">50</option>
            </select>
          </div>

          <!-- Toggle filters button -->
          <div class="form-group">
            <button type="button" id="toggle-filters" class="btn btn-secondary" aria-expanded="false" aria-controls="filters-panel">
              <span class="btn-text">Filters</span>
              <span class="btn-icon" aria-hidden="true">‚ñº</span>
            </button>
          </div>
        </div>
      </form>

      <!-- Filters panel -->
      <div id="filters-panel" class="filters" hidden aria-labelledby="filters-heading">
        <h3 id="filters-heading" class="filters-title">Filters</h3>

        <!-- Date range filter -->
        <div class="filter-group">
          <label class="filter-label">Date Range</label>
          <div class="date-range">
            <input type="date" id="date-start" name="date_start" class="form-input" aria-label="Start date" />
            <span class="date-separator">to</span>
            <input type="date" id="date-end" name="date_end" class="form-input" aria-label="End date" />
          </div>
        </div>

        <!-- Filename filter -->
        <div class="filter-group">
          <label for="filename" class="filter-label">Filename Contains</label>
          <input
            type="text"
            id="filename"
            name="filename"
            class="form-input"
            placeholder="e.g., 'Q3-2023'"
          />
        </div>

        <!-- Page range filter -->
        <div class="filter-group">
          <label class="filter-label">Page Range</label>
          <div class="page-range">
            <input type="number" id="page-min" name="page_min" min="1" class="form-input" placeholder="From" aria-label="Minimum page" />
            <span class="page-separator">to</span>
            <input type="number" id="page-max" name="page_max" min="1" class="form-input" placeholder="To" aria-label="Maximum page" />
          </div>
        </div>

        <!-- Document type filter -->
        <div class="filter-group">
          <label class="filter-label">Document Type</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" name="type" value="pdf" checked class="checkbox-input" />
              <span>PDF</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" name="type" value="docx" checked class="checkbox-input" />
              <span>DOCX</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" name="type" value="pptx" checked class="checkbox-input" />
              <span>PPTX</span>
            </label>
          </div>
        </div>

        <!-- Clear filters button -->
        <div class="filter-actions">
          <button type="button" id="clear-filters" class="btn btn-outline">Clear Filters</button>
        </div>
      </div>
    </section>

    <!-- Search stats -->
    <div id="search-stats" class="search-stats" hidden>
      <div class="stat">
        <span class="stat-label">Query:</span>
        <span id="stat-query" class="stat-value"></span>
      </div>
      <div class="stat">
        <span class="stat-label">Results:</span>
        <span id="stat-count" class="stat-value"></span>
      </div>
      <div class="stat">
        <span class="stat-label">Time:</span>
        <span id="stat-time" class="stat-value"></span>
      </div>
      <div class="stat">
        <span class="stat-label">Mode:</span>
        <span id="stat-mode" class="stat-value"></span>
      </div>
    </div>

    <!-- Loading indicator -->
    <div id="loading" class="loading" hidden role="status" aria-live="polite">
      <div class="loading-spinner"></div>
      <p class="loading-text">Searching documents...</p>
    </div>

    <!-- Results section -->
    <section id="results-section" class="results-section" hidden>
      <h2 id="results-heading">Search Results</h2>
      <div id="results-container" class="results-container" role="region" aria-labelledby="results-heading">
        <!-- Results will be populated here by JavaScript -->
      </div>
    </section>

    <!-- No results message -->
    <div id="no-results" class="no-results" hidden>
      <p>No results found for your query. Try different search terms or adjust filters.</p>
    </div>
  </main>

  <!-- Preview modal -->
  <div id="preview-modal" class="modal" hidden role="dialog" aria-labelledby="preview-title" aria-modal="true">
    <div class="modal-overlay" aria-hidden="true"></div>

    <div class="modal-content">
      <!-- Modal header -->
      <div class="modal-header">
        <h2 id="preview-title" class="modal-title">Document Preview</h2>
        <button class="close-btn" aria-label="Close preview">√ó</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <!-- Document info -->
        <div class="preview-info">
          <strong id="preview-filename" class="preview-filename">filename.pdf</strong>
          <span id="preview-page" class="preview-page">Page 1 of 10</span>
        </div>

        <!-- Page image -->
        <div class="preview-image-container">
          <img id="preview-image" src="" alt="Document page" class="preview-image" />
        </div>

        <!-- Page navigation -->
        <div class="preview-navigation">
          <button id="prev-page" class="btn btn-secondary" aria-label="Previous page">
            <span aria-hidden="true">‚Üê Previous</span>
          </button>
          <span id="page-indicator" class="page-indicator">1 / 10</span>
          <button id="next-page" class="btn btn-secondary" aria-label="Next page">
            <span aria-hidden="true">Next ‚Üí</span>
          </button>
        </div>

        <!-- Text content -->
        <div class="preview-text">
          <h3>Page Text</h3>
          <pre id="preview-text-content" class="preview-text-content"></pre>
        </div>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button id="download-document" class="btn btn-primary">Download Document</button>
        <button id="close-modal" class="btn btn-secondary">Close</button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 DocuSearch MVP - Wave 2 (Mock Data)</p>
    </div>
  </footer>

  <script src="search.js"></script>
</body>
</html>

# Dependency Security Audit Summary
**Generated:** 2025-10-16  
**Project:** tkr-docusearch  
**Python Version:** 3.13.3  
**Virtual Environment:** .venv-native  

## Overall Risk Assessment

**Risk Level:** CRITICAL  
**Risk Score:** 163.5

## Key Findings

### Security Vulnerabilities (4 CVEs)
- **Critical:** 0
- **High:** 1 (torch CVE-2025-3730)
- **Medium:** 3 (pip CVE-2025-8869, urllib3 CVE-2025-50182, CVE-2025-50181)
- **Low:** 0

### License Compliance (2 issues)
- **PyMuPDF:** Dual Licensed - GNU AFFERO GPL 3.0 or Artifex Commercial License (HIGH RISK)
- **mutagen:** GNU General Public License v2 or later (GPLv2+) (HIGH RISK)

### Outdated Packages (43 packages)
- **Major Version Updates:** 9 packages requiring careful review
  - torch: 2.7.1 → 2.9.0
  - urllib3: 2.3.0 → 2.5.0 (includes security fixes)
  - tiktoken: 0.3.3 → 0.12.0
  - And 6 others
- **Minor/Patch Updates:** 34 packages with safe updates available

### Supply Chain Risks
- **1 Development/Preview Version Detected:**
  - colpali_engine: 0.3.13.dev1+g9bee9b2b7 (MEDIUM risk)

## Total Package Statistics
- **Total Packages Installed:** 213
- **Packages with Known CVEs:** 3
- **Packages with License Issues:** 2
- **Packages Outdated:** 43 (20% of dependencies)

## Critical Actions Required

### 1. Patch Security Vulnerabilities (IMMEDIATE)

**Torch DoS Vulnerability (CVE-2025-3730):**
```bash
pip install --upgrade torch>=2.8.0
```

**urllib3 Security Issues (CVE-2025-50182, CVE-2025-50181):**
```bash
pip install --upgrade urllib3>=2.5.0
```

**pip Tarfile Extraction Vulnerability (CVE-2025-8869):**
```bash
# Fix planned for pip 25.3
# Monitor: https://github.com/pypa/pip/pull/13550
pip install --upgrade pip  # when 25.3 is released
```

### 2. Review GPL/AGPL Licenses (HIGH PRIORITY)

**PyMuPDF (AGPL 3.0):**
- Usage: PDF processing in document parsing
- Options:
  - Obtain commercial license from Artifex
  - Replace with PyPDF2/pypdf (MIT licensed, already installed)
  - Ensure AGPL compliance (source code availability)

**mutagen (GPLv2+):**
- Usage: Audio metadata extraction (ID3 tags)
- Options:
  - Verify GPL compatibility with project license
  - Consider alternative: tinytag (MIT licensed)

### 3. Update Critical Packages (MEDIUM PRIORITY)

```bash
# Major version updates (test thoroughly)
pip install --upgrade \
    torch>=2.9.0 \
    urllib3>=2.5.0 \
    tiktoken>=0.12.0 \
    pillow>=12.0.0 \
    semchunk>=3.2.3

# Safe minor/patch updates
pip install --upgrade \
    pydantic>=2.12.2 \
    transformers>=4.57.1 \
    fastapi>=0.119.0 \
    numpy>=2.3.4
```

## Recommendations

### Immediate (Week 1)
1. Update urllib3 to 2.5.0 (security fixes)
2. Update torch to 2.8.0+ (CVE patch)
3. Review PyMuPDF and mutagen license compliance
4. Test critical package updates in development

### Short-term (Month 1)
1. Implement automated dependency scanning (Dependabot, Safety)
2. Establish dependency approval process
3. Document accepted security exceptions
4. Schedule monthly dependency review cycle

### Long-term (Quarter 1)
1. Reduce dependency count (currently 213 packages)
2. Audit and remove unused dependencies
3. Implement supply chain security checks
4. Set up vulnerability disclosure process

## Report Location
- **Full HTML Report:** `/Volumes/tkr-riffic/@tkr-projects/tkr-docusearch/.context-kit/analysis/reports/2025-10-16/dependency-audit-report.html`
- **Manifest:** `/Volumes/tkr-riffic/@tkr-projects/tkr-docusearch/.context-kit/analysis/manifest.json`

## Tools Used
- **pip-audit 2.9.0:** CVE vulnerability scanning
- **pip-licenses 5.0.0:** License compliance analysis
- **pip list --outdated:** Package currency assessment

---
*Report generated by dependency-audit-agent using tkr-project-kit 3.6.0*

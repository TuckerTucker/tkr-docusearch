{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://docusearch.local/schemas/error-response.json",
  "title": "ErrorResponse",
  "description": "Standard error response format for all API endpoints",
  "type": "object",
  "required": ["error"],
  "properties": {
    "error": {
      "type": "string",
      "description": "Human-readable error message",
      "minLength": 1,
      "examples": [
        "Document not found",
        "Invalid request",
        "Server error",
        "Unsupported format"
      ]
    },
    "code": {
      "type": "string",
      "description": "Machine-readable error code",
      "enum": [
        "DOCUMENT_NOT_FOUND",
        "INVALID_REQUEST",
        "SERVER_ERROR",
        "UNSUPPORTED_FORMAT",
        "FILE_TOO_LARGE",
        "PROCESSING_FAILED",
        "STORAGE_ERROR",
        "CHROMADB_ERROR"
      ],
      "examples": ["DOCUMENT_NOT_FOUND", "INVALID_REQUEST"]
    },
    "details": {
      "type": "object",
      "description": "Additional error context",
      "additionalProperties": true,
      "examples": [
        {
          "doc_id": "abc123...",
          "expected_formats": ["pdf", "md", "docx"]
        }
      ]
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "error": "Document not found",
      "code": "DOCUMENT_NOT_FOUND",
      "details": {
        "doc_id": "abc123def456789abcdef0123456789abcdef0123456789abcdef0123456789ab"
      }
    },
    {
      "error": "Unsupported file format: .exe",
      "code": "UNSUPPORTED_FORMAT",
      "details": {
        "provided_format": "exe",
        "supported_formats": [
          "pdf", "docx", "pptx", "xlsx", "md", "html", "csv",
          "png", "jpg", "jpeg", "tiff", "bmp", "webp",
          "vtt", "wav", "mp3", "xml", "json"
        ]
      }
    },
    {
      "error": "File size exceeds maximum limit",
      "code": "FILE_TOO_LARGE",
      "details": {
        "file_size": 104857600,
        "max_size": 52428800
      }
    }
  ]
}

/**
 * Reusable Animations
 *
 * Agent 13: Visual Polish & Animation Designer
 * Wave 3 - BBox Overlay React Implementation
 *
 * GPU-accelerated animations for smooth 60fps performance.
 * All animations respect prefers-reduced-motion.
 */

/* ============================================
   Bbox Animations
   ============================================ */

/**
 * Bbox activation animation - smooth scale pulse
 * Used when a bbox becomes active
 */
@keyframes bbox-activate {
  0% {
    transform: scale(1);
    opacity: 0.8;
  }
  50% {
    transform: scale(1.05);
    opacity: 1;
  }
  100% {
    transform: scale(1.02);
    opacity: 1;
  }
}

/**
 * Bbox hover glow animation
 * Subtle pulsing glow effect on hover
 */
@keyframes bbox-glow {
  0% {
    filter: drop-shadow(0 0 4px currentColor);
  }
  50% {
    filter: drop-shadow(0 0 8px currentColor);
  }
  100% {
    filter: drop-shadow(0 0 4px currentColor);
  }
}

/**
 * Bbox ripple effect (optional)
 * Ripple animation on click
 */
@keyframes bbox-ripple {
  0% {
    transform: scale(1);
    opacity: 0.6;
  }
  100% {
    transform: scale(1.2);
    opacity: 0;
  }
}

/* ============================================
   Chunk Highlight Animations
   ============================================ */

/**
 * Chunk highlight fade-in
 * Smooth background color transition
 */
@keyframes chunk-highlight {
  0% {
    background-color: transparent;
    border-left-color: transparent;
  }
  100% {
    background-color: var(--citation-highlight-bg);
    border-left-color: var(--primary-color, var(--primary));
  }
}

/**
 * Chunk pulse animation
 * More noticeable pulse for active chunks
 */
@keyframes chunk-pulse {
  0% {
    background-color: transparent;
    border-left-color: transparent;
    transform: translateX(0);
  }
  50% {
    background-color: var(--citation-highlight-bg);
    border-left-color: var(--primary-color, var(--primary));
    transform: translateX(2px);
  }
  100% {
    background-color: var(--citation-highlight-bg);
    border-left-color: var(--primary-color, var(--primary));
    transform: translateX(0);
  }
}

/**
 * Chunk hover animation
 * Subtle background fade on hover
 */
@keyframes chunk-hover {
  0% {
    background-color: transparent;
  }
  100% {
    background-color: var(--citation-highlight-bg);
    opacity: 0.7;
  }
}

/* ============================================
   Loading Skeleton Animations
   ============================================ */

/**
 * Shimmer loading animation
 * Moves gradient across skeleton elements
 */
@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

/**
 * Pulse loading animation
 * Alternative to shimmer, opacity-based
 */
@keyframes pulse-opacity {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.8;
  }
}

/**
 * Skeleton fade-in
 * Used when content loads
 */
@keyframes skeleton-fade-in {
  0% {
    opacity: 0;
    transform: translateY(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================
   Micro-interaction Animations
   ============================================ */

/**
 * Fade-in with slide up
 * For tooltips, popovers
 */
@keyframes fade-in-up {
  0% {
    opacity: 0;
    transform: translateY(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/**
 * Fade-in with slide down
 */
@keyframes fade-in-down {
  0% {
    opacity: 0;
    transform: translateY(-8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/**
 * Scale bounce
 * For button press states
 */
@keyframes scale-bounce {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

/**
 * Focus ring animation
 * Animated focus indicator
 */
@keyframes focus-ring {
  0% {
    box-shadow: 0 0 0 0 var(--ring);
  }
  100% {
    box-shadow: 0 0 0 4px var(--ring);
  }
}

/**
 * Success checkmark animation
 */
@keyframes success-checkmark {
  0% {
    transform: scale(0) rotate(0deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.2) rotate(10deg);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

/**
 * Error shake animation
 */
@keyframes error-shake {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-4px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(4px);
  }
}

/* ============================================
   Staggered Animations (for lists)
   ============================================ */

/**
 * Stagger fade-in utility
 * Apply with delay via calc(var(--stagger-index) * 50ms)
 */
@keyframes stagger-fade-in {
  0% {
    opacity: 0;
    transform: translateY(12px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================
   Reduced Motion Overrides
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  /* Disable all animations for users who prefer reduced motion */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  /* Keep essential animations but make them instant */
  @keyframes bbox-activate,
  @keyframes chunk-highlight,
  @keyframes chunk-pulse,
  @keyframes shimmer,
  @keyframes fade-in-up,
  @keyframes fade-in-down,
  @keyframes scale-bounce,
  @keyframes stagger-fade-in {
    0%, 100% {
      /* All states collapse to final state */
    }
  }
}

/* ============================================
   Animation Utility Classes
   ============================================ */

.animate-bbox-activate {
  animation: bbox-activate 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-bbox-glow {
  animation: bbox-glow 2s ease-in-out infinite;
}

.animate-chunk-highlight {
  animation: chunk-highlight 250ms ease-out;
}

.animate-chunk-pulse {
  animation: chunk-pulse 600ms ease-out;
}

.animate-shimmer {
  animation: shimmer 2s infinite linear;
}

.animate-pulse {
  animation: pulse-opacity 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.animate-fade-in-up {
  animation: fade-in-up 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-fade-in-down {
  animation: fade-in-down 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-scale-bounce {
  animation: scale-bounce 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-success {
  animation: success-checkmark 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-error {
  animation: error-shake 400ms cubic-bezier(0.4, 0, 0.2, 1);
}
